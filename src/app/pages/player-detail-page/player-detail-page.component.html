<div class="flex flex-column gap-4">
    @if (player$ | async; as player) {
    <div class="search-bar">
        <app-search-bar></app-search-bar>
    </div>

    <div class="grid justify-content-around align-items-stretch flex-wrap mb-2">
        <div class="col-12 md:col-5">
            <p-card class="h-full align-content-center">
                <ng-template #content>
                    <div class="flex flex-wrap justify-content-center gap-2 md:gap-7 ">
                        <div class="player-picture flex align-items-center justify-content-center">
                            <img [src]="player.player.photo" [alt]="player.player.name" />
                        </div>

                        <div class="flex flex-column text-2xl justify-content-center align-items-center">
                            <span>{{ player.player.name }}</span>
                            <span>{{ player.statistics[0].games.position }}</span>
                            <span>{{ player.player.nationality }} - {{ player.statistics[0].team.name }}</span>
                        </div>
                    </div>
                </ng-template>
            </p-card>
        </div>

        <div class="col-12 md:col-2">
            <p-card class="h-full">
                <ng-template #content>
                    <div class="flex flex-column justify-content-center align-items-center gap-3">
                        <span class="text-bold text-xl">{{ player.computed.leagueData.name }}</span>
                        <div>
                            <img id="league-logo" [src]="player.computed.leagueData.logo" [alt]="player.player.name" />
                        </div>
                    </div>
                </ng-template>
            </p-card>
        </div>
    </div>


    <div class="md:px-8 mb-2">
        <p-card>
            <ng-template #content>
                <div class="grid">
                    <div class="col-12 md:col-2 flex flex-column align-items-center">
                        <span class="text-xl text-400 mb-3">Nationalité</span>
                        <span class="text-3xl ">{{ player.player.nationality }}</span>
                    </div>

                    <div class="col-12 md:col-2 flex flex-column align-items-center">
                        <span class="text-xl text-400  mb-3">{{
                            player.player.birth.date | date
                            }}</span>
                        <span class="text-3xl ">{{ player.player.age }} ans</span>
                    </div>
                    <div class="col-12 md:col-2 flex flex-column align-items-center">
                        <span class="text-xl text-400  mb-3">Taille</span>
                        <span class="text-3xl ">{{ player.player.height }}</span>
                    </div>
                    <div class="col-12 md:col-2 flex flex-column align-items-center">
                        <span class="text-xl text-400  mb-3">Poids</span>
                        <span class="text-3xl ">{{player.player.weight}}</span>
                    </div>
                    <div class="col-12 md:col-2 flex flex-column align-items-center">
                        <span class="text-xl text-400  mb-3">Poste</span>
                        <span class="text-3xl ">{{player.statistics[0].games.position}}</span>
                    </div>
                    <div class="col-12 md:col-2 flex flex-column align-items-center">
                        <span class="text-xl text-400  mb-3">Equipe</span>
                        <span class="text-3xl " style="text-align: center;">{{player.statistics[0].team.name}}</span>
                    </div>

                </div>
            </ng-template>
        </p-card>
    </div>

    <div class="flex justify-content-center gap-3 md:gap-8 align-items-stretch md:px-8 mb-2 flex-wrap">
        <div class="flex-grow-1">
            <p-card class="flex justify-content-center align-items-center h-full">
                <ng-content #body class="w-full">
                    <h3 style="text-align: center;">Aperçu des attributs</h3>
                    <app-radar-chart></app-radar-chart>
                </ng-content>
            </p-card>
        </div>

        @if (player.computed.nationalTeamStats.length > 0) {
        <div class="flex-grow-1">
            <p-card class="flex flex-column justify-content-center align-items-center h-full gap-3">
                <ng-content #body>
                    <h3 style="text-align: center;">Equipe nationale</h3>
                    <div class="flex gap-3 pt-3 mb-5">
                        <img [src]="player.computed.nationalTeamStats[0].team.logo" id="nationalTeamImage"
                            class="mr-5" />
                        <div class="flex flex-column justify-content-center align-items-center">
                            <p class="text-3xl">{{ player.player.nationality }}</p>
                        </div>
                    </div>

                    <div class="grid">
                        <div class="col-6 flex flex-column justify-content-center align-content-center">
                            <p class="text-3xl m-auto mb-3">Buts</p>
                            <p class="text-5xl m-auto text-primary">
                                {{ player.computed.goalsWithNationalTeam}}
                            </p>
                        </div>

                        <div class="col-6 flex flex-column justify-content-center align-content-center">
                            <p class="text-3xl m-auto mb-3">Assists</p>
                            <p class="text-5xl m-auto text-primary">
                                {{ player.computed.assistsWithNationalTeam}}
                            </p>
                        </div>
                    </div>

                </ng-content>

            </p-card>
        </div>
        }
    </div>

    <div class="md:px-8 mb-2" style="font-family: 'Orbitron';">
        <h3 class="text-bold text-xl mt-3 mb-3" style="text-align: center;">Saison 2023</h3>

        <div class="accordion-data mb-3">
            <p-accordion value="0" [multiple]="true">


                <p-accordion-panel value="1">
                    <p-accordion-header>Matchs</p-accordion-header>
                    <p-accordion-content class="accordion-panel-content">
                        <div class="accordion-content">
                            <p class="m-0 flex justify-content-between ">Apparitions : <span class="text-primary">{{
                                    player.computed.appearences }}</span></p>
                            <p class="m-0 flex justify-content-between ">Titulaire : <span class="text-primary">{{
                                    player.computed.lineups
                                    }}</span></p>
                            <p class="m-0 flex justify-content-between ">Total des minutes jouées : <span
                                    class="text-primary">{{
                                    player.computed.minutes }} min</span></p>
                        </div>
                    </p-accordion-content>
                </p-accordion-panel>

                <p-accordion-panel value="2">
                    <p-accordion-header>Attaque</p-accordion-header>
                    <p-accordion-content class="accordion-panel-content">
                        <div class="accordion-content">
                            <p class="m-0 flex justify-content-between ">Buts : <span class="text-primary">{{
                                    player.computed.goals }}</span>
                            </p>
                            <p class="m-0 flex justify-content-between ">Total des tirs : <span class="text-primary">{{
                                    player.computed.shots
                                    }}</span></p>
                            <p class="m-0 flex justify-content-between ">Tirs cadrés : <span class="text-primary">{{
                                    player.computed.shotsOn
                                    }}</span></p>
                            <p class="m-0 flex justify-content-between ">Penalty réussi : <span class="text-primary">{{
                                    player.computed.penaltyScored }}</span></p>
                        </div>
                    </p-accordion-content>
                </p-accordion-panel>

                <p-accordion-panel value="3">
                    <p-accordion-header>Passes</p-accordion-header>
                    <p-accordion-content class="accordion-panel-content">
                        <div class="accordion-content">
                            <p class="m-0 flex justify-content-between ">Passes décisives : <span
                                    class="text-primary">{{
                                    player.computed.assists }}</span></p>
                            <p class="m-0 flex justify-content-between ">Total passes : <span class="text-primary">{{
                                    player.computed.totalPasses }}</span></p>
                            <p class="m-0 flex justify-content-between ">Passes clées : <span class="text-primary">{{
                                    player.computed.keyPasses }}</span></p>
                        </div>
                    </p-accordion-content>
                </p-accordion-panel>

                <p-accordion-panel value="4">
                    <p-accordion-header>Défense</p-accordion-header>
                    <p-accordion-content class="accordion-panel-content">
                        <div class="accordion-content">
                            <p class="m-0 flex justify-content-between ">Total duels : <span class="text-primary">{{
                                    player.computed.totalDuel
                                    }}</span></p>
                            <p class="m-0 flex justify-content-between ">Duels gagnés : <span class="text-primary">{{
                                    player.computed.duelWon
                                    }}</span></p>
                            <p class="m-0 flex justify-content-between ">Tacles : <span class="text-primary">{{
                                    player.computed.tackles}}</span></p>
                            <p class="m-0 flex justify-content-between ">Intérceptions : <span class="text-primary">{{
                                    player.computed.interceptions }}</span>
                            </p>
                            <p class="m-0 flex justify-content-between ">Fautes commises :
                                <span class="text-primary">{{player.computed.foulsCommited }}</span>
                            </p>
                            <p class="m-0 flex justify-content-between ">Fautes subies : <span class="text-primary">{{
                                    player.computed.foolsDrawn }}</span></p>
                        </div>
                    </p-accordion-content>
                </p-accordion-panel>
            </p-accordion>
        </div>

    </div>
    }
</div>